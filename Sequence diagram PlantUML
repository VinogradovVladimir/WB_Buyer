@startuml
actor Пользователь
control ВалидаторНомера
boundary СтраницаАвторизации
boundary СтраницаПоискаТоваров
boundary СтраницаТовараПоСсылка
actor ЗарубежныйМагазин
boundary СтраницаКаталогаТоваров
boundary СтраницаТовара
entity БазыДанныхТоваров
boundary СтраницаКорзины
boundary СтраницаОформленияЗаказа
boundary СтраницаОплаты
actor Банк

Пользователь -> СтраницаАвторизации : Нажать "Авторизация"

loop ПроверкаНомера
    Пользователь -> СтраницаАвторизации : Ввести номер телефона
    СтраницаАвторизации -> ВалидаторНомера : Передать информацию
    ВалидаторНомера -> ВалидаторНомера : Проверка
    opt ПодтверждениеНомера
        СтраницаАвторизации <-- ВалидаторНомера : Подтверждение (ответ)
        Пользователь <-- СтраницаАвторизации : Вход в систему
    end
end

Пользователь -> СтраницаПоискаТоваров : Найти товар
activate СтраницаПоискаТоваров
СтраницаПоискаТоваров -> СтраницаКаталогаТоваров : Искать в каталоге
activate СтраницаКаталогаТоваров
СтраницаКаталогаТоваров -> БазыДанныхТоваров : Запрос информации
БазыДанныхТоваров --> СтраницаКаталогаТоваров : Каталог (ответ)
deactivate СтраницаКаталогаТоваров
СтраницаКаталогаТоваров -> СтраницаТовара : Выбрать товар в каталоге
activate СтраницаТовара
СтраницаТовара -> БазыДанныхТоваров : Запрос информации
БазыДанныхТоваров --> СтраницаТовара : Информация о товаре (ответ)
deactivate БазыДанныхТоваров
Пользователь <-- СтраницаТовара : Показать информацию о товаре (ответ)
deactivate СтраницаТовара
deactivate СтраницаПоискаТоваров

Пользователь -> СтраницаПоискаТоваров : Найти товар
activate СтраницаПоискаТоваров
СтраницаПоискаТоваров -> СтраницаТовараПоСсылка : Ввести ссылку
activate СтраницаТовараПоСсылка
СтраницаТовараПоСсылка -> ЗарубежныйМагазин : Запрос информации
ЗарубежныйМагазин --> СтраницаТовараПоСсылка : Информация о товаре (ответ)
Пользователь <-- СтраницаТовараПоСсылка : Показать информацию о товаре (ответ)
deactivate СтраницаТовараПоСсылка
deactivate СтраницаПоискаТоваров

Пользователь -> СтраницаКорзины : Добавить товар в корзину, перейти к корзине
activate СтраницаКорзины
СтраницаКорзины -> СтраницаКорзины : Получение информации о продуктах
Пользователь <-- СтраницаКорзины : Показать товары в корзине (ответ)
deactivate СтраницаКорзины

Пользователь -> СтраницаОформленияЗаказа : Перейти к оформлению заказа
activate СтраницаОформленияЗаказа
СтраницаОформленияЗаказа -> СтраницаОплаты : Перенаправить на страницу оплаты
activate СтраницаОплаты

loop ОплатаНеЗавершена
    СтраницаОплаты -> Банк : Проверить оплату
    Банк --> СтраницаОплаты : Ответ об оплате
    deactivate Банк
    opt ОплатаЗавершена
        СтраницаОформленияЗаказа <-- СтраницаОплаты : Подтверждение оплаты (ответ)
        Пользователь <-- СтраницаОформленияЗаказа : Показать подтверждение заказа
    end
end
deactivate СтраницаОплаты
deactivate СтраницаОформленияЗаказа

@enduml
